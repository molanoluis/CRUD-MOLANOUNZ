{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\CRUD\\\\react-hooks\\\\src\\\\components\\\\MyComponent.jsx\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport BIRDS from 'vanta/dist/vanta.birds.min'; // Make sure window.THREE is defined, e.g. by including three.min.js in the document head using a <script> tag\n\nimport * as THREE from 'three';\nawait loadJs('https://unpkg.com/three@0.115.0');\nappendCss(`\nheader { background-color: silver }\nheader canvas { display: block }\nmain { padding: 20px }\nmain h2 a { font-size: 60%; }\n`);\nlet themes = ['birds', 'cells', 'clouds', 'clouds2', 'dots', 'fog', 'globe', 'halo', 'net', 'rings', 'ripple', 'topology', 'trunk', 'waves']; // https://github.com/tengbao/vanta\n// https://vantajs.com\n\nlet App = () => {\n  let [theme, setTheme] = useState('birds');\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(VantaHeader, {\n    theme: theme,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 9\n    }\n  }, \"Vanta.js - \", /*#__PURE__*/React.createElement(\"a\", {\n    target: \"_blank\",\n    href: \"https://github.com/tengbao/vanta\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 24\n    }\n  }, \"https://github.com/tengbao/vanta\")), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 9\n    }\n  }, themes.map(t => {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: t,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 18\n      }\n    }, t === theme ? t : /*#__PURE__*/React.createElement(\"a\", {\n      onClick: () => {\n        setTheme(t);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 49\n      }\n    }, t));\n  }))));\n};\n\nlet VantaHeader = ({\n  theme\n}) => {\n  let headerRef = useRef(null);\n  useEffect(() => {\n    let el = headerRef.current;\n    let destroy = loadVantaEffect(el, theme);\n    return destroy;\n  }, [theme]);\n  return /*#__PURE__*/React.createElement(\"header\", {\n    ref: headerRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 10\n    }\n  });\n};\n\nlet loadVantaEffect = (el, theme) => {\n  let promise = (async () => {\n    let removeLoading = addLoading();\n\n    if (['halo', 'topology'].includes(theme)) {\n      await loadJs('https://unpkg.com/vanta@0.5.15/vendor/p5.min.js');\n    }\n\n    let method = theme.toUpperCase();\n\n    if (!(window.VANTA && VANTA[method])) {\n      await loadJs(`https://unpkg.com/vanta@0.5.15/dist/vanta.${theme}.min.js`);\n    }\n\n    let ret = VANTA[method]({\n      el\n    });\n    let canvasHeight = el.querySelector('canvas').clientHeight;\n    el.style.height = `${canvasHeight}px`;\n    removeLoading();\n    return ret;\n  })();\n\n  return () => {\n    promise.then(ret => {\n      ret.destroy();\n    });\n  };\n};\n\nexport default MyComponent;","map":{"version":3,"sources":["C:/Users/CRUD/react-hooks/src/components/MyComponent.jsx"],"names":["React","useState","useEffect","useRef","BIRDS","THREE","loadJs","appendCss","themes","App","theme","setTheme","map","t","VantaHeader","headerRef","el","current","destroy","loadVantaEffect","promise","removeLoading","addLoading","includes","method","toUpperCase","window","VANTA","ret","canvasHeight","querySelector","clientHeight","style","height","then","MyComponent"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\r\nimport BIRDS from 'vanta/dist/vanta.birds.min'\r\n// Make sure window.THREE is defined, e.g. by including three.min.js in the document head using a <script> tag\r\nimport * as THREE from 'three';\r\n\r\n\r\n\r\nawait loadJs('https://unpkg.com/three@0.115.0')\r\n\r\nappendCss(`\r\nheader { background-color: silver }\r\nheader canvas { display: block }\r\nmain { padding: 20px }\r\nmain h2 a { font-size: 60%; }\r\n`)\r\n\r\nlet themes = [\r\n  'birds', 'cells', 'clouds', 'clouds2', 'dots', 'fog', 'globe',\r\n  'halo', 'net', 'rings', 'ripple', 'topology', 'trunk', 'waves',\r\n]\r\n\r\n// https://github.com/tengbao/vanta\r\n// https://vantajs.com\r\nlet App = () => {\r\n  let [theme, setTheme] = useState('birds')\r\n  return (\r\n    <div>\r\n      <VantaHeader theme={theme} />\r\n      <main>\r\n        <h2>Vanta.js - <a target=\"_blank\" href=\"https://github.com/tengbao/vanta\">https://github.com/tengbao/vanta</a></h2>\r\n        <ul>{themes.map(t => {\r\n          return <li key={t}>{t === theme ? t : <a onClick={() => {\r\n            setTheme(t)\r\n          }}>{t}</a>}</li>\r\n        })}</ul>\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n\r\nlet VantaHeader = ({ theme }) => {\r\n  let headerRef = useRef(null)\r\n\r\n  useEffect(() => {\r\n    let el = headerRef.current\r\n    let destroy = loadVantaEffect(el, theme)\r\n    return destroy\r\n  }, [theme])\r\n\r\n  return <header ref={headerRef}></header>\r\n}\r\n\r\nlet loadVantaEffect = (el, theme) => {\r\n  let promise = (async () => {\r\n    let removeLoading = addLoading()\r\n    if (['halo', 'topology'].includes(theme)) {\r\n      await loadJs('https://unpkg.com/vanta@0.5.15/vendor/p5.min.js')\r\n    }\r\n    let method = theme.toUpperCase()\r\n    if (!(window.VANTA && VANTA[method])) {\r\n      await loadJs(`https://unpkg.com/vanta@0.5.15/dist/vanta.${theme}.min.js`)\r\n    }\r\n    let ret = VANTA[method]({ el })\r\n    let canvasHeight = el.querySelector('canvas').clientHeight\r\n    el.style.height = `${canvasHeight}px`\r\n    removeLoading()\r\n    return ret\r\n  })()\r\n  return () => {\r\n    promise.then(ret => { ret.destroy() })\r\n  }\r\n}\r\n\r\n\r\n  export default MyComponent;"]},"metadata":{},"sourceType":"module"}